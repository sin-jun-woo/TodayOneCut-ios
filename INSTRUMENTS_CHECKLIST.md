# Instruments 검사 체크리스트

## 📋 검사 준비

### 사전 준비
- [x] 코드 레벨 메모리 누수 방지 완료 ✅
- [x] Debug print 문 `#if DEBUG` 처리 완료 ✅
- [x] 컴파일 에러 수정 완료 ✅
- [ ] Release 빌드 성공 확인

---

## 🔧 Instruments 실행

### 1단계: Instruments 실행
1. Xcode에서 프로젝트 열기
2. **Product > Profile** (`⌘I`) 실행
3. Instruments 창이 열림

### 2단계: 템플릿 선택
- [ ] **Leaks** 템플릿 선택 (메모리 누수 검사)
- [ ] 또는 **Allocations** + **Leaks** 조합 선택 (더 상세한 분석)

### 3단계: 앱 실행
- [ ] 시뮬레이터 또는 실제 기기 선택
- [ ] **Record** 버튼 클릭 (빨간 원)
- [ ] 앱이 자동으로 실행됨

---

## 🧪 테스트 시나리오

### 기본 기능 테스트 (각 항목 체크)
- [ ] 앱 시작 및 온보딩
- [ ] 홈 화면 로드
- [ ] 텍스트 기록 작성
- [ ] 사진 기록 작성
- [ ] 기록 수정
- [ ] 기록 삭제
- [ ] 기록 목록 조회
- [ ] 기록 상세 보기
- [ ] 검색 기능
- [ ] 달력 기능
- [ ] 설정 변경 (테마, 폰트)

### 반복 작업 테스트 (중요!)
- [ ] 기록 작성 → 삭제 (10회 반복)
- [ ] 화면 전환 (홈 → 목록 → 달력 → 설정) (10회 반복)
- [ ] 검색 반복 (검색어 입력 → 결과 확인 → 취소) (10회 반복)
- [ ] 이미지 로딩 반복 (사진 기록 작성 → 상세 보기 → 뒤로가기) (10회 반복)

### 엣지 케이스 테스트
- [ ] 기록 작성 중 앱 종료 후 재시작
- [ ] 권한 거부 시 처리
- [ ] 큰 이미지 선택 및 해제
- [ ] 검색어 입력 중 빠르게 변경

---

## 📊 검사 결과 확인

### Leaks 검사
- [ ] 빨간색 표시 없음 (메모리 누수 없음)
- [ ] 노란색 표시 없음 (잠재적 누수 없음)
- [ ] 누수 발생 위치 확인 (발견 시)

### Allocations 검사
- [ ] 메모리 사용량 안정적 (급격한 증가 없음)
- [ ] 반복 작업 시 메모리 증가 없음
- [ ] 화면 전환 시 메모리 해제 확인
- [ ] 이미지 로딩 후 메모리 해제 확인

### 확인 사항
- [ ] 메모리 누수 없음 ✅
- [ ] 메모리 사용량 적정 수준 ✅
- [ ] 반복 작업 시 메모리 증가 없음 ✅
- [ ] 화면 전환 시 메모리 해제 확인 ✅

---

## 🐛 문제 발견 시

### 메모리 누수 발견
1. **누수 위치 확인**
   - Instruments에서 누수 발생 위치 확인
   - 스택 트레이스 확인
   - 객체 타입 확인

2. **원인 분석**
   - 강한 참조 순환 확인
   - Task 취소 누락 확인
   - 리소스 해제 누락 확인

3. **수정**
   - `[weak self]` 추가
   - Task 취소 처리 추가
   - `deinit`에서 리소스 정리

### 메모리 사용량 증가
1. **증가 원인 확인**
   - Allocations에서 증가하는 객체 타입 확인
   - 반복 작업 시 증가 패턴 확인

2. **최적화**
   - 불필요한 객체 생성 제거
   - 이미지 크기 최적화
   - 캐시 크기 제한

---

## 📝 검사 결과 기록

### 검사 일자
- 검사일: _______________
- 검사자: _______________
- 검사 환경: 시뮬레이터 / 실제 기기 (_____________)

### 검사 결과
- [ ] 메모리 누수 없음
- [ ] 메모리 사용량 적정
- [ ] 반복 작업 시 안정적
- [ ] 발견된 문제: _______________

### 발견된 문제 (있는 경우)
1. 문제 1: _______________
   - 위치: _______________
   - 해결 방법: _______________

2. 문제 2: _______________
   - 위치: _______________
   - 해결 방법: _______________

---

## ✅ 검사 완료 기준

- [ ] 모든 기본 기능 테스트 완료
- [ ] 반복 작업 테스트 완료 (10회 이상)
- [ ] 메모리 누수 없음 확인
- [ ] 메모리 사용량 안정적 확인
- [ ] 발견된 문제 수정 완료 (있는 경우)
- [ ] 재검사 완료 (수정 후)

---

**작성일**: 2025-01-XX  
**상태**: Instruments 검사 준비 완료

